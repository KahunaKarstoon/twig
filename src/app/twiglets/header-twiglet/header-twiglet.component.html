<div class="top" *ngIf="!userState.get('isEditing')">
  <div class="pull-left">
    <div class="dropdown">
      <app-twiglet-dropdown [twiglets]="twiglets" [models]="models" [twiglet]="twiglet" [userState]="userState"></app-twiglet-dropdown>      
    </div>
    <div class="new-button">
      <button class="clickable button no-margin btn-sm" *ngIf="userState.get('user')" (click)="createNewTwiglet()" ngbTooltip="New Twiglet" placement="right">
        <i class="fa fa-plus"></i>
      </button>      
    </div>
    <div class="clearfix"></div>
  </div>
  <div class="pull-right" *ngIf="userState.get('mode') === 'twiglet'">
    <button class="button btn-sm no-margin"  (click)="startEditing()">Edit</button>
  </div>
  <div class="pull-right inputs">
    <div class="input">
      <label class="form-check-label" ngbTooltip="Uncheck to stop graph from updating node locations" placement="bottom">
        <input class="form-check-input" type="checkbox" [checked]="userState.get('renderOnEveryTick')" (change)="setRenderEveryTick($event)">
        Render Every Tick
      </label>
    </div>
    <div class="input">
      <label class="form-check-label" ngbTooltip="Uncheck to stop simulation of node movements" placement="bottom">
        <input class="form-check-input" type="checkbox" [checked]="userState.get('runSimulation')" (change)="setRunSimulation($event)">
        Run Simulation
      </label>
    </div>
  </div>
</div>
<div class="top" *ngIf="userState.get('isEditing')">
  <div class="clear-fix row no-margin">
    <div class="pull-left">
      <h4>{{ twiglet.get('name') }}</h4>
    </div>
    <div class="pull-right ml-auto">
      <button class="button btn-sm no-margin" (click)="discardChanges()">Cancel</button>
      <button class="button btn-sm no-margin" *ngIf="!userState.get('editTwigletModel')" (click)="saveTwiglet()">Save</button>
      <button class="button btn-sm no-margin" *ngIf="userState.get('editTwigletModel')" (click)="saveTwigletModel()">Save</button>
    </div>
  </div>
  <div class="row no-margin">
    <span [class]="getTwigletTabClass()" (click)="toggleTwigletEditing()">Twiglet</span>
    <span [class]="getTwigletModelTabClass()" (click)="toggleTwigletModelEditing()">Twiglet's Model</span>
  </div>
  <hr>
  <app-header-twiglet-edit [twiglet]="twiglet" [twigletModel]="twigletModel" [twiglets]="twiglets" [userState]="userState"></app-header-twiglet-edit>
</div>