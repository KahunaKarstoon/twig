<div class="top" *ngIf="!userState.get(USERSTATE.IS_EDITING)" id="twiglet-header-not-editing">
  <div class="pull-left">
    <div class="dropdown">
      <app-breadcrumb-navigation [twiglet]="twiglet" [userState]="userState" [views]="views" [eventsList]="eventsList"></app-breadcrumb-navigation>
    </div>
    <div class="pull-right edit-btn" *ngIf="userState.get(USERSTATE.MODE) === 'twiglet' && userState.get(USERSTATE.USER) && twiglet.get(TWIGLET.NAME)">
      <button class="button btn-sm no-margin" (click)="startEditing()" *ngIf="!disableEdit()">Edit</button>
      <button class="button btn-sm no-margin disabled" *ngIf="disableEdit()" ngbTooltip="Edit not available, please reset to twiglet defaults" placement="bottom">Edit</button>
    </div>
  </div>
  <div class="pull-right inputs">
    <div class="input">
      <label class="form-check-label" ngbTooltip="Uncheck to stop graph from updating node locations" placement="bottom">
        <input class="form-check-input" type="checkbox" [checked]="viewData.get(VIEW_DATA.RENDER_ON_EVERY_TICK)" (change)="setRenderEveryTick($event)">
        <span class="bump-right">Render Every Tick</span>
      </label>
      <label class="form-check-label" ngbTooltip="Uncheck to stop simulation of node movements" placement="bottom">
        <input class="form-check-input" type="checkbox" [checked]="viewData.get(VIEW_DATA.RUN_SIMULATION)" (change)="setRunSimulation($event)">
        <span class="bump-right">Run Simulation</span>
      </label>
    </div>
  </div>
</div>
<div class="top" *ngIf="userState.get(USERSTATE.IS_EDITING)" id="twiglet-header-is-editing">
  <div class="clear-fix row no-margin">
    <div class="pull-left">
      <h4 class="bump">{{ twiglet.get(TWIGLET.NAME) }}</h4>
    </div>
    <div class="pull-right ml-auto">
      <button class="button btn-sm no-margin btn-secondary" (click)="discardChanges()">Cancel</button>
      <button class="button btn-sm no-margin save twiglet" [disabled]="!userState.get(USERSTATE.FORM_VALID)" *ngIf="!userState.get(USERSTATE.EDIT_TWIGLET_MODEL)" (click)="saveTwiglet()">Save</button>
      <button class="button btn-sm no-margin save twiglet-model" [disabled]="!userState.get(USERSTATE.FORM_VALID)" *ngIf="userState.get(USERSTATE.EDIT_TWIGLET_MODEL)" (click)="saveTwigletModel()">Save</button>
    </div>
  </div>
  <div class="row no-margin">
    <span [class]="getTwigletTabClass()" (click)="toggleTwigletEditing()">Twiglet</span>
    <span [class]="getTwigletModelTabClass()" (click)="toggleTwigletModelEditing()">Twiglet's Model</span>
  </div>
  <hr>
  <app-header-twiglet-edit [twiglet]="twiglet" [twigletModel]="twigletModel" [twiglets]="twiglets" [userState]="userState"></app-header-twiglet-edit>
</div>
