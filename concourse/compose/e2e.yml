test-runner:
    image: trion/ng-cli-e2e
    links:
    - e2e-web
    - e2e-api
    volumes:
      - ../../:/twig
    command: 'true'


# couchdb server deployment
e2e-couch:
    image: couchdb
    expose:
    - 5984

# Server deployment
e2e-api:
    image: benaychh/twig-api
    environment:
      TWIG_API_DB_URL: 'http://e2e-couch:5984'
      TWIG_API_LDAP_URL: 'ldap://10.10.243.43'
    expose:
    - 443
    links:
    - e2e-couch

# Client deployment
e2e-web:
    image: benaychh/twig:latest-commit
    expose:
    - 80
    links:
    - e2e-api
